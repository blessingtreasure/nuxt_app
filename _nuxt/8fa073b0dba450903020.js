(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{488:function(t,e,o){var content=o(566);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(12).default)("54176b6e",content,!0,{sourceMap:!1})},489:function(t,e,o){var content=o(568);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(12).default)("d0481166",content,!0,{sourceMap:!1})},490:function(t,e,o){var content=o(570);"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,o(12).default)("0add778d",content,!0,{sourceMap:!1})},562:function(t,e,o){"use strict";var r=o(3),n=o(28),l=o(37),c=o(191),m=o(94),v=o(15),f=o(66).f,d=o(95).f,h=o(10).f,_=o(563).trim,x=r.Number,w=x,C=x.prototype,D="Number"==l(o(133)(C)),y="trim"in String.prototype,I=function(t){var e=m(t,!1);if("string"==typeof e&&e.length>2){var o,r,n,l=(e=y?e.trim():_(e,3)).charCodeAt(0);if(43===l||45===l){if(88===(o=e.charCodeAt(2))||120===o)return NaN}else if(48===l){switch(e.charCodeAt(1)){case 66:case 98:r=2,n=49;break;case 79:case 111:r=8,n=55;break;default:return+e}for(var code,c=e.slice(2),i=0,v=c.length;i<v;i++)if((code=c.charCodeAt(i))<48||code>n)return NaN;return parseInt(c,r)}}return+e};if(!x(" 0o1")||!x("0b1")||x("+0x1")){x=function(t){var e=arguments.length<1?0:t,o=this;return o instanceof x&&(D?v((function(){C.valueOf.call(o)})):"Number"!=l(o))?c(new w(I(e)),o,x):I(e)};for(var N,k=o(8)?f(w):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),M=0;k.length>M;M++)n(w,N=k[M])&&!n(x,N)&&h(x,N,d(w,N));x.prototype=C,C.constructor=x,o(16)(r,"Number",x)}},563:function(t,e,o){var r=o(6),n=o(38),l=o(15),c=o(564),m="["+c+"]",v=RegExp("^"+m+m+"*"),f=RegExp(m+m+"*$"),d=function(t,e,o){var n={},m=l((function(){return!!c[t]()||"​"!="​"[t]()})),v=n[t]=m?e(h):c[t];o&&(n[o]=v),r(r.P+r.F*m,"String",n)},h=d.trim=function(t,e){return t=String(n(t)),1&e&&(t=t.replace(v,"")),2&e&&(t=t.replace(f,"")),t};t.exports=d},564:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},565:function(t,e,o){"use strict";var r=o(488);o.n(r).a},566:function(t,e,o){(e=o(11)(!1)).push([t.i,".canvas[data-v-f23bdc22]{position:absolute;transform:rotate(-90deg)}",""]),t.exports=e},567:function(t,e,o){"use strict";var r=o(489);o.n(r).a},568:function(t,e,o){(e=o(11)(!1)).push([t.i,".comment-list-item[data-v-fb8f15b0]{border-bottom:1px dashed #ddd;padding:15px 0}.comment-list-item .avatar[data-v-fb8f15b0]{overflow:hidden}.comment-list-item .avatar .avatar-user[data-v-fb8f15b0]{float:left;font-size:14px}.comment-list-item .avatar .avatar-user img[data-v-fb8f15b0]{width:15px;height:15px;border-radius:50%;position:relative;top:2px}.comment-list-item .avatar .avatar-user .reply[data-v-fb8f15b0]{margin:0 8px;color:#999}.comment-list-item .avatar .avatar-release-time[data-v-fb8f15b0]{float:right;color:#999;font-size:12px}.comment-list-item .comment-main[data-v-fb8f15b0]{padding-left:20px}.comment-list-item .comment-main p[data-v-fb8f15b0]{padding:12px 0}.nolast[data-v-fb8f15b0]{margin-left:20px}.last[data-v-fb8f15b0]{padding-left:0}",""]),t.exports=e},569:function(t,e,o){"use strict";var r=o(490);o.n(r).a},570:function(t,e,o){(e=o(11)(!1)).push([t.i,".container[data-v-f2700c20]{width:1000px;margin:0 auto}.el-breadcrumb[data-v-f2700c20],.hotel[data-v-f2700c20]{margin-top:20px}.hotel h3[data-v-f2700c20]{font-size:24px;font-weight:400}.hotel .hotel-location[data-v-f2700c20],.hotel .pingyin[data-v-f2700c20]{color:#666;font-size:14px}.hotel .el-row[data-v-f2700c20]{margin-top:40px}.hotel .el-row .hotel-img-big img[data-v-f2700c20]{width:640px;height:360px}.hotel .el-row .hotel-img-small[data-v-f2700c20]{padding:0!important;margin:0;box-sizing:border-box}.hotel .el-row .hotel-img-small .img-wrap[data-v-f2700c20]{float:left;margin-bottom:14px;cursor:pointer}.hotel .el-row .hotel-img-small .img-wrap[data-v-f2700c20]:nth-child(2n-1){margin-right:15px}.hotel .el-row .hotel-img-small .img-wrap img[data-v-f2700c20]{width:160px;display:block;background-size:cover}.hotel-price[data-v-f2700c20]{margin-top:40px}.hotel-price .el-row[data-v-f2700c20]{border-bottom:1px solid #ebeef5;padding:16px 0;font-size:14px;color:#606266}.hotel-price .form[data-v-f2700c20]{transition:background-color .25}.hotel-price .form[data-v-f2700c20]:hover{background-color:#f5f7fa}.hotel-price .head[data-v-f2700c20]{color:#909399}.hotel-price .middle[data-v-f2700c20]{text-align:center}.hotel-price .bottom[data-v-f2700c20]{padding-left:176px}.hotel-price .bottom .orange[data-v-f2700c20]{color:#f90}.hotel-price .bottom i[data-v-f2700c20]{margin:0 6px}[data-v-f2700c20] .amap_lib_placeSearch{border:none!important}.map[data-v-f2700c20]{overflow:hidden;margin:40px 0}.map #map-container[data-v-f2700c20]{width:600px;height:400px;float:left}.map .traffic[data-v-f2700c20]{padding-left:20px;width:380px;height:400px;float:right}.map .traffic #panel[data-v-f2700c20]{background-color:#fff;height:350px;width:100%;overflow:auto}.hotel-info .el-row[data-v-f2700c20]{padding:14px 0;border-bottom:1px solid #eee;font-size:14px}.hotel-info .tag[data-v-f2700c20]{margin-right:10px}.comments[data-v-f2700c20]{margin:20px 0}.comments h4[data-v-f2700c20]{padding:24px 0}.comments .comments-main .el-col[data-v-f2700c20]{height:70px}.comments .comments-main .comments-total[data-v-f2700c20]{color:#333}.comments .comments-main .recomment .recomment-stars[data-v-f2700c20]{position:relative;height:100%;display:flex;align-items:center;padding-left:36px}.comments .comments-main .recomment .recomment-stars[data-v-f2700c20] i{font-size:22px;margin-right:2px}.comments .comments-main .recomment .remoment-bg[data-v-f2700c20]{position:absolute;height:70px;width:70px;border-radius:100px;display:flex;justify-content:center;align-items:center;border:2px solid #f90;font-size:17px;color:#f90;opacity:.35;left:50%;top:-21px;transform:rotate(-30deg) translateX(-50%)}.comments .comments-main .score[data-v-f2700c20]{display:flex}.comments .comments-main .score .score-item[data-v-f2700c20]{display:flex;width:70px;height:70px;align-items:center;flex-direction:column;justify-content:center;position:relative;color:#f90;margin-left:50px}.comments .comment-list[data-v-f2700c20]{margin-top:40px}.comments .comment-none[data-v-f2700c20]{height:100px;text-align:center;line-height:100px;color:#999}",""]),t.exports=e},589:function(t,e,o){"use strict";o.r(e);o(190),o(131),o(14),o(25),o(51);var r=o(5),n=(o(562),{data:function(){return{timer:null}},props:{score:{type:Number,default:function(){return 0}}},mounted:function(){var t=this;this.timer=setInterval((function(){t.draw()}),20)},methods:{draw:function(){if(this.score){var canvas=this.$refs.canvas;if(canvas.getContext){var t=canvas.getContext("2d");t.beginPath();var e=+(this.score/10).toFixed(1);t.arc(35,35,34,0,2*Math.PI*e),t.strokeStyle="#ff9900",t.lineWidth=2,t.stroke(),clearInterval(this.timer)}}}},destroyed:function(){clearInterval(this.timer)}}),l=(o(565),o(13)),canvas=Object(l.a)(n,(function(){var t=this.$createElement;return(this._self._c||t)("canvas",{ref:"canvas",staticClass:"canvas",attrs:{width:"70","data-score":this.score,height:"70"}})}),[],!1,null,"f23bdc22",null).exports,c=(o(29),o(30),function(t){return(t=t.toString())[1]?t:"0"+t}),m={name:"CommentItem",filters:{formatDate:function(time){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-",e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:":",o=new Date(time);if(!o)return"";var r=o.getFullYear(),n=o.getMonth()+1,l=o.getDate(),m=o.getMinutes();return[r,n,l].map(c).join(t)+" "+[l,m].map(c).join(e)}},props:{item:{type:Object,default:function(){return{}}},isLast:{type:Boolean,default:!1}},data:function(){return{src:"/images/user.png"}}},v=(o(567),{data:function(){return{value:3.7,hotelDetail:{scores:{}},bigImg:1,map:null,activeName:"景点",comments:[{pics:[]}],total:0}},components:{Canvas:canvas,CommentItem:Object(l.a)(m,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{class:["comment-list-item",t.item.parent?"nolast":"last"]},[o("div",{staticClass:"avatar"},[t._m(0),t._v(" "),o("div",{staticClass:"avatar-release-time"},[t._v("\n        "+t._s(t._f("formatDate")(t.item.created_at))+"\n      ")])]),t._v(" "),o("div",{staticClass:"comment-main"},[o("p",[t._v(t._s(t.item.content))])])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"avatar-user"},[e("img",{attrs:{src:"http://157.122.54.189:9095/assets/images/avatar.jpg",alt:""}}),this._v(" "),e("span",[this._v("闲云用户")])])}],!1,null,"fb8f15b0",null).exports},mounted:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getHotelDetail();case 2:t.getComments(),setTimeout((function(){t.setMap()}),50);case 4:case"end":return e.stop()}}),e)})))()},methods:{setMap:function(){var t=this.hotelDetail.location,e=t.longitude,o=t.latitude;this.map=new AMap.Map("map-container",{zoom:12,center:[e,o]});var r=new AMap.Icon({size:new AMap.Size(40,40),image:"/images/location_icon_hotel.png",imageSize:new AMap.Size(40,40)}),n=new AMap.Marker({position:new AMap.LngLat(e,o),icon:r,title:this.hotelDetail.name,animation:"AMAP_ANIMATION_DROP"});new AMap.Text({text:this.hotelDetail.name,map:this.map,offset:new AMap.Pixel(10,-50),position:new AMap.LngLat(e,o)});this.map.add(n),this.mapSearch()},getHotelDetail:function(){var t=this;return new Promise(function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(o,r){var n,l,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.$route.query.id,e.next=3,t.$axios({url:"/hotels",params:{id:n}});case 3:l=e.sent,(c=l.data).data[0].breadcrumb=c.data[0].breadcrumb.split(" > "),t.hotelDetail=c.data[0],o(t.hotelDetail);case 8:case"end":return e.stop()}}),e)})));return function(t,o){return e.apply(this,arguments)}}())},handleImgChoose:function(t){this.bigImg=t},mapSearch:function(){var t=this;AMap.service(["AMap.PlaceSearch"],(function(){new AMap.PlaceSearch({pageSize:15,pageIndex:1,city:t.hotelDetail.real_city,citylimit:!0,map:t.map,panel:"panel",autoFitView:!0}).search(t.activeName)}))},handleClick:function(t){},getComments:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var o,r,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.$route.query.id,e.next=3,t.$axios({url:"/hotels/comments",params:{hotel:o}});case 3:r=e.sent,n=r.data,t.comments=n.data,t.total=n.total;case 7:case"end":return e.stop()}}),e)})))()}},watch:{activeName:function(){return this.mapSearch(),""}}}),f=(o(569),Object(l.a)(v,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"container"},[o("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[o("el-breadcrumb-item",{attrs:{to:{path:"/hotel"}}},[t._v("酒店")]),t._v(" "),t._l(t.hotelDetail.breadcrumb,(function(e,r){return o("el-breadcrumb-item",{key:r},[t._v(t._s(e))])}))],2),t._v(" "),o("div",{staticClass:"hotel"},[o("h3",[t._v(t._s(t.hotelDetail.name))]),t._v(" "),o("div",{staticClass:"pingyin"},[t._v(t._s(t.hotelDetail.alias))]),t._v(" "),o("div",{staticClass:"hotel-location"},[o("i",{staticClass:"el-icon-location"}),t._v("\n      "+t._s(t.hotelDetail.address)+"\n    ")]),t._v(" "),o("el-row",{attrs:{gutter:15}},[o("el-col",{staticClass:"hotel-img-big",attrs:{span:16}},[o("img",{attrs:{src:"/images/"+t.bigImg+".jpeg",alt:""}})]),t._v(" "),o("el-col",{staticClass:"hotel-img-small",attrs:{span:8}},t._l(6,(function(e,r){return o("div",{key:r,staticClass:"img-wrap",on:{click:function(o){return t.handleImgChoose(e)}}},[o("img",{attrs:{src:"/images/"+e+".jpeg",alt:""}})])})),0)],1)],1),t._v(" "),o("div",{staticClass:"hotel-price"},[o("el-row",{staticClass:"head"},[o("el-col",{attrs:{span:8}},[t._v("价格来源")]),t._v(" "),o("el-col",{staticClass:"middle",attrs:{span:8}},[t._v("低价房源")]),t._v(" "),o("el-col",{staticClass:"bottom",attrs:{span:8}},[t._v("最低价格/每晚")])],1),t._v(" "),t._l(t.hotelDetail.products,(function(e,r){return o("el-row",{key:r,staticClass:"form"},[o("el-col",{attrs:{span:8}},[t._v(t._s(e.name))]),t._v(" "),o("el-col",{staticClass:"middle",attrs:{span:8}},[t._v(t._s(e.bestType))]),t._v(" "),o("el-col",{staticClass:"bottom",attrs:{span:8}},[o("span",{staticClass:"orange"},[t._v("￥ "+t._s(e.price))]),t._v(" "),o("i",[t._v("起")]),t._v(" "),o("span",{staticClass:"orange"},[t._v(">")])])],1)}))],2),t._v(" "),o("div",{staticClass:"map"},[o("script",{attrs:{src:"https://webapi.amap.com/maps?v=1.4.15&key=7179779dbf7533b3b406fdd4449307bd&plugin=AMap.Driving,AMap.PlaceSearch"}}),t._v(" "),o("div",{attrs:{id:"map-container"}}),t._v(" "),o("div",{staticClass:"traffic"},[o("el-tabs",{on:{"tab-click":function(e){return t.handleClick(t.activeName)}},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[o("el-tab-pane",{attrs:{label:"景点",name:"景点"}}),t._v(" "),o("el-tab-pane",{attrs:{label:"交通",name:"公交，地铁站"}})],1),t._v(" "),o("div",{attrs:{id:"panel"}})],1)]),t._v(" "),o("div",{staticClass:"hotel-info"},[o("el-row",[o("el-col",{attrs:{span:4}},[t._v("基本信息")]),t._v(" "),o("el-col",{attrs:{span:5}},[t._v("入住时间: 14:00之后")]),t._v(" "),o("el-col",{attrs:{span:5}},[t._v("离店时间: 12:00之前")]),t._v(" "),o("el-col",{attrs:{span:5}},[t._v(t._s(t.hotelDetail.creation_time)+"/"+t._s(t.hotelDetail.renovat_time))]),t._v(" "),o("el-col",{attrs:{span:5}},[t._v("酒店规模: "+t._s(t.hotelDetail.roomCount)+"间客房")])],1),t._v(" "),o("el-row",[o("el-col",{attrs:{span:4}},[t._v("主要设施")]),t._v(" "),o("el-col",{attrs:{span:20}},t._l(t.hotelDetail.hotelassets,(function(e,r){return o("el-tag",{key:r,staticClass:"tag",attrs:{type:"info"}},[t._v(t._s(e.name))])})),1)],1),t._v(" "),o("el-row",[o("el-col",{attrs:{span:4}},[t._v("停车服务")]),t._v(" "),o("el-col",{attrs:{span:20}},[t._v(t._s(t.hotelDetail.parking))])],1),t._v(" "),o("el-row",[o("el-col",{attrs:{span:4}},[t._v("品牌信息")]),t._v(" "),t.hotelDetail.hotelbrand?o("el-col",{attrs:{span:20}},[t._v(t._s(t.hotelDetail.hotelbrand.name))]):t._e()],1)],1),t._v(" "),o("div",{staticClass:"comments"},[o("h4",[t._v(t._s(t.total)+"条真实用户评论")]),t._v(" "),o("el-row",{staticClass:"comments-main",attrs:{gutter:20}},[o("el-col",{staticClass:"comments-total",attrs:{span:3}},[o("div",[t._v("总评数: "+t._s(t.hotelDetail.all_remarks))]),t._v(" "),o("div",[t._v("好评数: "+t._s(t.hotelDetail.good_remarks))]),t._v(" "),o("div",[t._v("差评数: "+t._s(t.hotelDetail.bad_remarks))])]),t._v(" "),o("el-col",{staticClass:"recomment",attrs:{span:5}},[o("div",{staticClass:"recomment-stars"},[t.hotelDetail.stars<=2?o("div",{staticClass:"remoment-bg"},[t._v("一般")]):t.hotelDetail.stars<4?o("div",{staticClass:"remoment-bg"},[t._v("推荐")]):o("div",{staticClass:"remoment-bg"},[t._v("非常推荐")]),t._v(" "),o("el-rate",{attrs:{disabled:"","show-score":"",max:5,"allow-half":"","text-color":"#ff9900","score-template":"{value}分"},model:{value:t.hotelDetail.stars,callback:function(e){t.$set(t.hotelDetail,"stars",e)},expression:"hotelDetail.stars"}})],1)]),t._v(" "),o("el-col",{staticClass:"score",attrs:{span:15}},[o("div",{staticClass:"score-item"},[o("Canvas",{attrs:{score:t.hotelDetail.scores.environment}}),t._v(" "),o("span",[t._v("环境")]),t._v(" "),o("span",[t._v(t._s(t.hotelDetail.scores.environment))])],1),t._v(" "),o("div",{staticClass:"score-item"},[o("Canvas",{attrs:{score:t.hotelDetail.scores.product}}),t._v(" "),o("span",[t._v("产品")]),t._v(" "),o("span",[t._v(t._s(t.hotelDetail.scores.product))])],1),t._v(" "),o("div",{staticClass:"score-item"},[o("Canvas",{attrs:{score:t.hotelDetail.scores.service}}),t._v(" "),o("span",[t._v("服务")]),t._v(" "),o("span",[t._v(t._s(t.hotelDetail.scores.service))])],1)])],1),t._v(" "),o("div",{staticClass:"comment-list"},[t._l(t.comments,(function(t,e){return o("CommentItem",{key:e,attrs:{item:t,"is-last":!0}})})),t._v(" "),t.comments.length<=0?o("div",{staticClass:"comment-none"},[t._v("暂无评论~")]):t._e()],2)],1)],1)}),[],!1,null,"f2700c20",null));e.default=f.exports}}]);